"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Subscription_1 = require("rxjs/internal/Subscription");
var asyncScheduler_1 = require("rxjs/internal/scheduler/asyncScheduler");
var p = Promise.resolve();
exports.asapScheduler = {
    now: function () {
        return Date.now();
    },
    schedule: function (work, delay, state, subs) {
        if (delay === void 0) { delay = 0; }
        if (state === void 0) { state = undefined; }
        subs = subs || new Subscription_1.Subscription();
        if (delay > 0) {
            asyncScheduler_1.asyncScheduler.schedule(work, delay, state, subs);
            return subs;
        }
        var stop = false;
        subs.add(function () { return stop = true; });
        p.then(function () {
            if (!stop) {
                work(state);
            }
        });
        return subs;
    }
};
//# sourceMappingURL=asapScheduler.js.map