"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var recycleSubscription_1 = require("rxjs/internal/util/recycleSubscription");
function retry(count) {
    if (count === void 0) { count = Number.POSITIVE_INFINITY; }
    return function (source) { return source.lift(retryOperator(count)); };
}
exports.retry = retry;
function retryOperator(count) {
    return function retryLifted(source) {
        var mut = this;
        var _error = mut.error;
        var counter = 0;
        mut.error = function (err) {
            if (counter++ < count) {
                recycleSubscription_1.recycleSubscription(mut.subscription);
                source.subscribe(mut);
            }
            else {
                _error(err);
            }
        };
        return source.subscribe(mut);
    };
}
//# sourceMappingURL=retry.js.map