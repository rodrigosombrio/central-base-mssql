"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var userFunction_1 = require("../util/userFunction");
var from_1 = require("../create/from");
var MutableSubscriber_1 = require("rxjs/internal/MutableSubscriber");
var noop_1 = require("rxjs/internal/util/noop");
function takeUntil(notifier) {
    return function (source) { return source.lift(takeUntilOperator(notifier)); };
}
exports.takeUntil = takeUntil;
function takeUntilOperator(notifier) {
    return function takeUntilLifted(source) {
        var mut = this;
        var notifierObs = userFunction_1.tryUserFunction(function () { return from_1.from(notifier); });
        if (userFunction_1.resultIsError(notifierObs)) {
            mut.error(notifierObs.error);
            return mut.subscription;
        }
        else {
            var notifierMut = new MutableSubscriber_1.MutableSubscriber(mut.complete, mut.error, noop_1.noop);
            mut.subscription.add(notifierObs.subscribe(notifierMut));
            return source.subscribe(this);
        }
    };
}
//# sourceMappingURL=takeUntil.js.map