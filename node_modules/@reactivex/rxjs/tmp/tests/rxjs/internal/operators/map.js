"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var userFunction_1 = require("../util/userFunction");
function map(project) {
    return function (source) { return source.lift(mapOperator(project)); };
}
exports.map = map;
function mapOperator(project) {
    return function mapLifted(source) {
        var mut = this;
        var _next = mut.next;
        var index = 0;
        mut.next = function (value) {
            var result = userFunction_1.tryUserFunction(project, [value, index++]);
            if (userFunction_1.resultIsError(result)) {
                mut.error(result.error);
            }
            else {
                _next(result);
            }
        };
        return source.subscribe(mut);
    };
}
//# sourceMappingURL=map.js.map