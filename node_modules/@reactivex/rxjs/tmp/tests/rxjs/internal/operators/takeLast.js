"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var EMPTY_1 = require("../EMPTY");
function takeLast(count) {
    if (count === void 0) { count = 1; }
    count = Math.max(count, 0);
    return function (source) { return count === 0 ? EMPTY_1.EMPTY : source.lift(takeLastOperator(count)); };
}
exports.takeLast = takeLast;
function takeLastOperator(count) {
    return function takeLastLifted(source) {
        var mut = this;
        var _next = mut.next;
        var _complete = mut.complete;
        var _buffer = [];
        mut.next = function (value) {
            _buffer.push(value);
            _buffer.splice(0, _buffer.length - count);
        };
        mut.complete = function () {
            for (var i = 0; i < _buffer.length && !mut.closed; i++) {
                _next(_buffer[i]);
            }
            _complete();
            _buffer.length = 0;
        };
        return source.subscribe(mut);
    };
}
//# sourceMappingURL=takeLast.js.map